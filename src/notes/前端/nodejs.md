---
title:nodejs
---





## nodejs

### 1.å…¨å±€å®‰è£…nodemon

```
npm i -g nodemon
//nodemon å¯ä»¥ä»£æ›¿nodeå»æ‰§è¡Œè„šæœ¬
nodemon index.js
```

æ”¹åŒ…çš„ä½œç”¨æ˜¯å½“æœåŠ¡å™¨å†…å®¹å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œå¯ä»¥è‡ªåŠ¨é‡å¯

å¯ä»¥é€šè¿‡ npm root -g å¯ä»¥æŸ¥çœ‹å…¨å±€å®‰è£…åŒ…çš„ä½ç½®

### 2.ä¿®æ”¹windowæ‰§è¡Œç­–ç•¥

windowä¼šå¯¹å…¨å±€å®‰è£…çš„åŒ…è¿›è¡Œé™åˆ¶

![QQ_1742635062601](./assets/QQ_1742635062601.png)

1. ä»¥ ç®¡ç†å‘˜èº«ä»½ æ‰“å¼€ powershell å‘½ä»¤è¡Œ

![QQ_1742635436942](./assets/QQ_1742635436942.png)

2. é”®å…¥å‘½ä»¤ set-ExecutionPolicy remoteSigned

![QQ_1742635456096](./assets/QQ_1742635456096.png)

3. é”®å…¥ A ç„¶åæ•²å›è½¦ ğŸ‘Œ 
4. å¦‚æœä¸ç”Ÿæ•ˆï¼Œå¯ä»¥å°è¯•é‡å¯ vscode

### 3.Express

åŸºäºnode.jså¹³å°çš„webåº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªå°è£…å¥½çš„å·¥å…·åŒ…ï¼Œå°è£…äº†å¾ˆå¤šåŠŸèƒ½ï¼Œä¾¿äºå¼€å‘webåº”ç”¨ï¼ˆhttpæœåŠ¡ï¼‰

1.res.end()å’Œres.send()




åœ¨ Express æ¡†æ¶ä¸­ï¼Œ`res.end()` å’Œ `res.send()` æ˜¯ç”¨äºç»“æŸ HTTP å“åº”çš„ä¸¤ç§æ–¹æ³•ï¼Œä½†å®ƒä»¬åœ¨ä½¿ç”¨åœºæ™¯å’ŒåŠŸèƒ½ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ï¼š

1. **æ¥æºä¸åŠŸèƒ½**

â€¢ **`res.end()`**ï¼š  
  æºè‡ª Node.js åŸç”Ÿçš„ `http` æ¨¡å—ã€‚å®ƒç›´æ¥è°ƒç”¨åº•å±‚çš„ `end()` æ–¹æ³•ï¼Œä»…æ”¯æŒå‘é€ **å­—ç¬¦ä¸²ï¼ˆStringï¼‰** æˆ– **Buffer** ç±»å‹çš„æ•°æ®ã€‚è‹¥éœ€è¦å‘é€å…¶ä»–ç±»å‹æ•°æ®ï¼ˆå¦‚å¯¹è±¡ï¼‰ï¼Œéœ€æ‰‹åŠ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²æˆ– Bufferï¼Œå¹¶è‡ªè¡Œè®¾ç½®å“åº”å¤´ï¼ˆå¦‚ `Content-Type`ï¼‰ã€‚

  ```javascript
res.setHeader('Content-Type', 'application/json');
res.end(JSON.stringify({ message: 'Hello' }));
  ```

â€¢ **`res.send()`**ï¼š  
  ç”± Express æ¡†æ¶å°è£…ã€‚æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ã€Buffer ç­‰ï¼‰ï¼Œå¹¶è‡ªåŠ¨å¤„ç†ä»¥ä¸‹å†…å®¹ï¼š
  â€¢ **è‡ªåŠ¨è®¾ç½® `Content-Type`**ï¼šæ ¹æ®æ•°æ®ç±»å‹æ¨æ–­ï¼ˆå¦‚ JSON å¯¹è±¡ä¼šè®¾ä¸º `application/json`ï¼‰ã€‚
  â€¢ **è½¬æ¢æ•°æ®æ ¼å¼**ï¼šè‡ªåŠ¨å°†å¯¹è±¡/æ•°ç»„è½¬ä¸º JSONï¼Œæ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ç­‰ã€‚
  â€¢ **è‡ªåŠ¨ç»“æŸå“åº”**ï¼šè°ƒç”¨åæ— éœ€å†è°ƒç”¨ `end()`ã€‚

  ```javascript
res.send({ message: 'Hello' }); // è‡ªåŠ¨ä¸º JSONï¼ŒçŠ¶æ€ç  200
  ```

 **æ³¨æ„äº‹é¡¹**

â€¢ **ä¸å¯é‡å¤è°ƒç”¨**ï¼š  
  æ— è®ºæ˜¯ `res.send()` è¿˜æ˜¯ `res.end()`ï¼Œä¸€æ—¦è°ƒç”¨ï¼Œå“åº”å³ç»“æŸï¼Œåç»­å†è°ƒç”¨ä¼šæŠ›é”™ï¼š

  ```javascript
res.send('Hello');
res.send('World'); // Error: Cannot send after headers are sent
  ```

â€¢ **å“åº”å¤´è®¾ç½®æ—¶æœº**ï¼š  
  åœ¨è°ƒç”¨ä¸¤è€…ä¹‹å‰éœ€å®Œæˆæ‰€æœ‰å“åº”å¤´çš„è®¾ç½®ï¼Œå¦åˆ™å¯èƒ½å¤±æ•ˆï¼š

  ```javascript
res.send('Hello');
res.setHeader('Content-Type', 'text/plain'); // æ— æ•ˆï¼å“åº”å·²å‘é€
  ```

â€¢ **çŠ¶æ€ç å¤„ç†**ï¼š  
  `res.send()` ä¼šä¿ç•™å…ˆå‰é€šè¿‡ `res.status()` è®¾ç½®çš„çŠ¶æ€ç ï¼Œè€Œ `res.end()` éœ€æ˜¾å¼è®¾ç½®ï¼š

  ```javascript
res.status(404).send('Not Found'); // æ­£ç¡®
res.status(404).end('Not Found');  // æ­£ç¡®ï¼ˆä½†éœ€æ‰‹åŠ¨å¤„ç†æ•°æ®ç±»å‹ï¼‰
  ```

---

 **å¯¹æ¯”æ€»ç»“**

| **ç‰¹æ€§**                  | `res.send()`                  | `res.end()`                |
| ------------------------- | ----------------------------- | -------------------------- |
| **æ•°æ®ç±»å‹æ”¯æŒ**          | å­—ç¬¦ä¸²ã€å¯¹è±¡ã€æ•°ç»„ã€Buffer ç­‰ | ä»…å­—ç¬¦ä¸²æˆ– Buffer          |
| **è‡ªåŠ¨è®¾ç½® Content-Type** | æ˜¯                            | å¦ï¼ˆéœ€æ‰‹åŠ¨è®¾ç½®ï¼‰           |
| **è‡ªåŠ¨ç»“æŸå“åº”**          | æ˜¯                            | æ˜¯ï¼ˆä½†éœ€è‡ªè¡Œå¤„ç†æ•°æ®æ ¼å¼ï¼‰ |
| **é€‚ç”¨åœºæ™¯**              | å¿«é€Ÿå‘é€ç»“æ„åŒ–æ•°æ®æˆ–é€šç”¨å“åº”  | åº•å±‚æ§åˆ¶ã€æµå¼ä¼ è¾“æˆ–ç©ºå“åº” |

---

ç¤ºä¾‹ä»£ç 

```javascript
// ä½¿ç”¨ res.send() å‘é€ JSON
app.get('/data', (req, res) => {
  res.send({ id: 1, name: 'Alice' }); // è‡ªåŠ¨è®¾ç½® Content-Type: application/json
});

// ä½¿ç”¨ res.end() å‘é€çº¯æ–‡æœ¬
app.get('/text', (req, res) => {
  res.set('Content-Type', 'text/plain');
  res.end('Plain Text');
});

// å‘é€ç©ºå“åº”
app.get('/empty', (req, res) => {
  res.status(204).end();
});
```

**æ€»ç»“**ï¼šåœ¨ Express ä¸­ä¼˜å…ˆä½¿ç”¨ `res.send()` ä»¥ç®€åŒ–ä»£ç ï¼›ä»…åœ¨éœ€è¦åº•å±‚æ§åˆ¶æˆ–å‘é€ç®€å•æ•°æ®æ—¶ä½¿ç”¨ `res.end()`ã€‚

